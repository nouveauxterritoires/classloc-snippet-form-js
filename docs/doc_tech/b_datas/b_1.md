# Formulaire de demande en ligne Classloc SNIPPET : Documentation technique

## B - Envoi des données du formulaire

### 1. Envoi des données

Les données remplies dans le formulaire sont envoyées à Classloc via la route suivante :

`POST: /api/v1/create_outsider_demand`

Les données sont formatées en JSON avec l'arborescence suivante :

``` json
{
    "data" : {
        "request": {
            "source",
            "snippet-token",
            "eligDemandee",
            "capClassee",
            "nbPiecesSupp",
            "comment"
        },
        "accommodation": {
            "name",
            "floor",
            "subtype",
            "phone",
            "address",
            "additionnalAddress",
            "codePostal",
            "city",
            "surface",
            "surfaceHsdb",
            "nbPersonsClasse",
            "nbCabine",
            "nbPiecesTot",
            "currentRanking",
            "owner": {
                "civility",
                "buisinessName",
                "firstName",
                "lastName",
                "siret",
                "mail",
                "phone",
                "address",
                "additionnalAddress",
                "postalCode",
                "city",
                "country"
            },
            "applicant": {
                "civility",
                "buisinessName",
                "firstName",
                "lastName",
                "siret",
                "mail",
                "phone",
                "address",
                "additionnalAddress",
                "postalCode",
                "city",
                "country"
            }
        }
    }
}
```

Si un problème survient lors de l'envoi, Classloc enverra un message qui apparaîtra en rouge sous le formulaire.